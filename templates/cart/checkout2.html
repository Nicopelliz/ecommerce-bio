{% extends 'base.html' %}

{% load static %}

{% block title %} {{block.super}} - CHECKOUT {% endblock %}

{% block content %}

{% load mathfilters %}
{% load cart_tag %}



<style>

    p {
        text-decoration: none;
        font-size: 25px;
        text-color:#52574e;
    }

    #main-cart {
        display: flex;


    }

    #user-adress-form {
        flex-basis: 50%;
        position: relative;
        width: 100%;
        margin: 1% 1% 1% 2%;
        padding:2% ;
        text-decoration: none;
        color:#52574e;
        border: 2px solid #52574e;
        border-radius: 5px;
    }


    #cart-form {
        flex-basis: 50%;
        position: relative;
        width: 100%;
        margin: 1% 2% 1% 1%;
        padding:2% ;
        text-decoration: none;
        color:#52574e;
        border: 2px solid #52574e;
        border-radius: 5px;
    }



    .center-title {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        padding: ;
        font-size: 25px;
    }

    .down-buttons {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        margin: 1% 2%;
        line-size: 45px;
    }

    hr {

        border:1px solid #52574e;
        margin-bottom: 5%;
        margin-top: 2%;
    }

    #cart-details {
        margin-top: 30px;
    }


    #one-cart-item {
        display:flex;
        justify-content: space-between;
        align-items:center;
        margin-top:10px;
        position:relative;
    }

    #one-cart-item div {

        font-size: 18px;
    }

    .image-product {

        flex-basis:30%;
        position: relative;


    }

    .name-product {
        flex-basis:20%;
        text-align: left;

    }

    .quantity-update {
        flex-basis:20%;
        margin-left: 10px;
    }


    .quantity-product-total {
        flex-basis:30%;
        text-align:center;
    }

    #one-cart-item .quantity-product {
        font-size:23px;
    }

    #one-cart-item .quantity-product-total {
        font-size:21px;
    }

    .img-in-cart{
        max-width: 80px;
        height: auto;
    }

    .button-size {
        font-size: 25px;
        color: #52574e;
    }



    #main .move-in-website {
        position: absolute;
        bottom:100px;
        left: 30px;
    }


@media screen and (max-width: 760px) {

        #main-cart {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin: 2%;

    }

    #user-adress-form {
        flex-basis: 50%;
        position: relative;
        width: 100%;
        margin: 1% 3%;
        padding:2% ;
    }


    #cart-form {
        flex-basis: 50%;
        position: relative;
        width: 100%;
        margin: 1% 3%;
        padding:2% ;
    }

}

</style>

<div id="main-cart">


    <div id="user-adress-form">

    </div>


    <div id="cart-form">
        <div class="center-title ">
            <div>Riepilogo carrello</div>

        </div>


        <!--<a href="{% url 'cart_clear' %}">Clear Cart</a>-->


        <div id="cart-details">

        {% for key,value in request.session.cart.items %}

            <div id="one-cart-item">



                <div class="image-product"><a href="{% url 'dettaglio_prodotto' value.product_id %}"><img class="img-in-cart" src="{{value.image}}" ></a></div>
                <div class="name-product">{{value.name}}</div>
                <div class="quantity-update">
                    <div class="quantity-product">x {{value.quantity}}</div>
                </div>




                {% with answer=value.price %}


                <div class="quantity-product-total">€ {{answer|mul:value.quantity}}</div>
                {% endwith %}


            </div>

        {% endfor %}

        </div>
        <hr class="line-break">
            <div class="center-title">
                <div>Prodotti: {{cart_total_quantity}}</div>
                <div>Totale €{{ cart_total_amount}}</div>
            </div>

    </div>

</div>


        <div class="down-buttons">
            <div><a class="login-button button-size" href="{% url 'cart_detail' %}">Torna al carrello</a></div>
            <div><a class="login-button button-size" href="{% url 'checkout' %}">Continua</a></div>
        </div>
{% endblock %}
